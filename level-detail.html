<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knit Out Level 1 Solution</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 0;
            background-image: linear-gradient(to bottom, #f8f9fa, #e9ecef);
        }
        
        .nav-container {
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            padding: 15px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid #eaeaea;
        }
        
        .brand {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            color: inherit;
        }
        
        .logo {
            width: 42px;
            height: 42px;
            background: linear-gradient(135deg, #5C4B9B, #3F88C5);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 20px;
        }
        
        .brand-name {
            font-size: 24px;
            font-weight: 700;
            color: #2c3e50;
        }
        
        .nav-menu {
            display: flex;
            gap: 30px;
        }
        
        .nav-link {
            font-size: 18px;
            font-weight: 500;
            color: #6c757d;
            text-decoration: none;
            transition: all 0.3s;
            position: relative;
            padding-bottom: 5px;
        }
        
        .nav-link:hover, .nav-link.active {
            color: #5C4B9B;
        }
        
        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(to right, #5C4B9B, #3F88C5);
            border-radius: 2px;
        }
        
        .main-container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }
        
        .page-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 0 20px;
        }
        
        .page-title {
            font-size: 3rem;
            font-weight: 800;
            color: #2c3e50;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(to right, #5C4B9B, #3F88C5);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .page-subtitle {
            font-size: 1.2rem;
            color: #6c757d;
            font-weight: 500;
            margin-bottom: 30px;
        }
        
        .current-level-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            background: white;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            max-width: 500px;
            margin: 0 auto 30px;
        }
        
        .level-display {
            font-size: 1.8rem;
            font-weight: 700;
            color: #5C4B9B;
            background: rgba(92, 75, 155, 0.1);
            padding: 8px 30px;
            border-radius: 30px;
            min-width: 120px;
            text-align: center;
        }
        
        .level-selector {
            display: flex;
            gap: 10px;
            flex-grow: 1;
        }
        
        .level-input {
            padding: 12px 20px;
            font-size: 1.1rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            color: #2c3e50;
            width: 120px;
        }
        
        .level-input:focus {
            outline: none;
            border-color: #5C4B9B;
            box-shadow: 0 0 0 3px rgba(92, 75, 155, 0.2);
        }
        
        .level-go-btn {
            padding: 12px 25px;
            background: #5C4B9B;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 140px;
        }
        
        .level-go-btn:hover {
            background: #4c3d82;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .content-container {
            display: flex;
            gap: 40px;
            margin-bottom: 50px;
        }
        
        .video-container {
            flex: 1;
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            aspect-ratio: 16/9;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .video-backdrop {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            background-color: #f8f9fa;
            position: relative;
        }
        
        .play-button {
            width: 80px;
            height: 80px;
            background: rgba(92, 75, 155, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 2;
        }
        
        .play-button:hover {
            transform: scale(1.1);
            background: rgba(76, 61, 130, 0.9);
        }
        
        .video-info {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            font-weight: 500;
            z-index: 1;
        }
        
        .video-title {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }
        
        .video-artist {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .video-frame {
            width: 100%;
            height: 100%;
            display: none;
        }
        
        .description-container {
            flex: 1;
            padding: 25px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.05);
        }
        
        .section-title {
            font-size: 1.8rem;
            color: #5C4B9B;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .description-text {
            font-size: 1.1rem;
            line-height: 1.7;
            color: #495057;
            margin-bottom: 25px;
        }
        
        .features-container {
            margin-top: 30px;
        }
        
        .feature-list {
            list-style-type: none;
            padding-left: 0;
        }
        
        .feature-item {
            padding: 10px 0;
            font-size: 1.1rem;
            color: #495057;
            position: relative;
            display: flex;
            align-items: center;
        }
        
        .feature-item:before {
            content: "âœ“";
            color: #2ecc71;
            font-weight: bold;
            margin-right: 10px;
            width: 25px;
            height: 25px;
            background: rgba(46, 204, 113, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .level-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 40px;
        }
        
        .nav-btn {
            padding: 16px 36px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            font-size: 1.1rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border: none;
            cursor: pointer;
            color: white;
        }
        
        .prev-btn {
            background: #6f42c1;
        }
        
        .all-btn {
            background: #3F88C5;
        }
        
        .next-btn {
            background: #5C4B9B;
        }
        
        .nav-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            background: #e74c3c;
            color: white;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transform: translateX(150%);
            transition: transform 0.5s ease;
            z-index: 2000;
            display: flex;
            align-items: center;
            gap: 10px;
            max-width: 400px;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            background: #2ecc71;
        }
        
        .video-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #5C4B9B;
            font-size: 1.2rem;
            display: none;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 20px;
            border-radius: 8px;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            color: #6c757d;
            font-size: 0.9rem;
            border-top: 1px solid #eaeaea;
            margin-top: 30px;
        }
        
        @media (max-width: 1000px) {
            .content-container {
                flex-direction: column;
            }
        }
        
        @media (max-width: 768px) {
            .nav-container {
                padding: 15px 20px;
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-menu {
                gap: 15px;
            }
            
            .page-title {
                font-size: 2.2rem;
            }
            
            .level-display {
                font-size: 1.4rem;
                padding: 6px 20px;
            }
            
            .current-level-container {
                flex-direction: column;
                gap: 15px;
                padding: 15px;
            }
            
            .nav-link {
                font-size: 16px;
            }
            
            .brand-name {
                font-size: 20px;
            }
            
            .nav-btn {
                padding: 14px 25px;
                font-size: 1rem;
            }
            
            .description-container {
                padding: 20px;
            }
            
            .level-selector {
                flex-direction: column;
                width: 100%;
            }
            
            .level-input, .level-go-btn {
                width: 100%;
            }
        }
        
        @media (max-width: 480px) {
            .page-title {
                font-size: 1.8rem;
            }
            
            .level-actions {
                flex-direction: column;
                width: 100%;
                gap: 10px;
            }
            
            .nav-btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <nav class="nav-container">
        <a href="index.html" class="brand">
            <div class="logo">KO</div>
            <div class="brand-name">Knit Out</div>
        </a>
        
        <div class="nav-menu">
            <a href="index.html" class="nav-link">Home</a>
            <a href="levels.html" class="nav-link active">Levels</a>
            <a href="download.html" class="nav-link">Download</a>
            <a href="blog.html" class="nav-link">Blog</a>
        </div>
    </nav>
    
    <div class="main-container">
        <div class="page-header">
            <h1 class="page-title">
                Knit Out Level <span id="levelNumber">1</span> Solution
            </h1>
            <div class="page-subtitle">Complete Walkthrough & Strategy</div>
            
            <div class="current-level-container">
                <div class="level-display">
                    Level <span id="displayLevel">1</span>
                </div>
                
                <div class="level-selector">
                    <input type="number" min="1" max="1858" placeholder="1" class="level-input" id="levelInput" value="1">
                    <button class="level-go-btn" id="goToLevelBtn">
                        <i class="fas fa-arrow-right"></i> Go to Level
                    </button>
                </div>
            </div>
        </div>
        
        <div class="content-container">
            <div class="video-container" id="videoContainer">
                <div class="video-backdrop" id="videoBackdrop">
                    <div class="video-info">
                        <div class="video-title">Never Gonna Give You Up</div>
                        <div class="video-artist">Rick Ashley</div>
                    </div>
                    <div class="play-button" id="playButton">
                        <i class="fas fa-play"></i>
                    </div>
                </div>
                <iframe class="video-frame" id="videoFrame" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                <div class="video-loading" id="videoLoading">
                    <i class="fas fa-spinner fa-spin"></i> Loading video...
                </div>
            </div>
            
            <div class="description-container">
                <h2 class="section-title">Challenge Description</h2>
                <p class="description-text">
                    Your challenge is to clear lines of colorful knots from the top, 
                    releasing ropes that need to find their matching bobbins below. 
                    Strategically choose the right bobbins from the grid to collect 
                    the ropes and complete each level.
                </p>
                
                <div class="features-container">
                    <h2 class="section-title">Game Features</h2>
                    <ul class="feature-list">
                        <li class="feature-item">Hundreds of intricate puzzles to solve</li>
                        <li class="feature-item">A vibrant palette of colors to keep your mind sharp</li>
                        <li class="feature-item">Relaxing gameplay with no timers - perfect for unwinding</li>
                        <li class="feature-item">Satisfying animations and delightful sound effects</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="level-actions">
            <button id="prevBtn" class="nav-btn prev-btn">
                <i class="fas fa-arrow-left"></i> Previous Level
            </button>
            <a href="levels.html" class="nav-btn all-btn">
                <i class="fas fa-list"></i> All Levels
            </a>
            <button id="nextBtn" class="nav-btn next-btn">
                Next Level <i class="fas fa-arrow-right"></i>
            </button>
        </div>
    </div>
    
    <div class="footer">
        Â© 2025 Knit Out Solutions. All rights reserved.
    </div>
    
    <div class="notification" id="notification">
        <i class="fas fa-info-circle"></i>
        <span id="notificationMessage">Level 1 loaded successfully!</span>
    </div>
    
    <script>
        // DOM elements
        const levelNumberEl = document.getElementById('levelNumber');
        const displayLevelEl = document.getElementById('displayLevel');
        const levelInputEl = document.getElementById('levelInput');
        const goToLevelBtn = document.getElementById('goToLevelBtn');
        const videoContainer = document.getElementById('videoContainer');
        const videoBackdrop = document.getElementById('videoBackdrop');
        const playButton = document.getElementById('playButton');
        const videoFrame = document.getElementById('videoFrame');
        const videoLoading = document.getElementById('videoLoading');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const notification = document.getElementById('notification');
        const notificationMessage = document.getElementById('notificationMessage');
        
        // State variables
        let videoData = {};
        let currentLevel = 1;
        
        // Initialize page
        async function initPage() {
            // Get level from URL
            const urlParams = new URLSearchParams(window.location.search);
            currentLevel = parseInt(urlParams.get('id') || '1');
            
            // Validate level
            if (currentLevel < 1 || currentLevel > 1858) currentLevel = 1;
            
            // Load video data
            await loadVideoData();
            
            // Update UI
            updateLevelDisplay();
            
            // Load initial video
            updateVideoContent();
            
            // Update navigation buttons
            updateNavigationButtons();
            
            // Add event listeners
            setupEventListeners();
            
            // Show notification
            showNotification(`Level ${currentLevel} loaded successfully!`, 'success');
        }
        
        // Load video data from test.json
        async function loadVideoData() {
            try {
                // Show loading message
                showNotification('Loading video data...');
                
                const response = await fetch('./test.json');
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                
                // Store video data
                videoData = data;
                
                console.log('Successfully loaded video data:', videoData);
                showNotification('Video data loaded successfully!', 'success');
                return data;
            } catch (error) {
                console.error('Error loading video data:', error);
                
                // Fallback data
                videoData = {
                    1: "dQw4w9WgXcQ",
                    2: "rymW4r3lH8w",
                    3: "QH2-TGUlwu4",
                    4: "9U6ULRW5E_4",
                    5: "8SbUC-UaAxE"
                };
                
                showNotification('Using fallback video data', 'error');
                return videoData;
            }
        }
        
        // Update video content
        function updateVideoContent() {
            if (!videoData || Object.keys(videoData).length === 0) {
                showNotification('No video data available', 'error');
                return;
            }
            
            // Get video ID for current level
            const videoId = videoData[currentLevel];
            
            if (!videoId) {
                showNotification(`No video for level ${currentLevel}`, 'error');
                return;
            }
            
            // Show loading
            videoLoading.style.display = 'flex';
            
            // Update the video frame
            videoFrame.src = `https://www.youtube.com/embed/${videoId}`;
            videoBackdrop.style.display = 'flex';
            videoFrame.style.display = 'none';
            
            // Hide loading after a short delay to simulate loading time
            setTimeout(() => {
                videoLoading.style.display = 'none';
                showNotification(`Video for Level ${currentLevel} ready`, 'success');
            }, 1000);
        }
        
        // Play video
        function playVideo() {
            // Hide the backdrop and play button
            videoBackdrop.style.display = 'none';
            
            // Show and play the video
            videoFrame.style.display = 'block';
            
            // Add autoplay parameter to the URL
            const currentSrc = videoFrame.src;
            if (!currentSrc.includes('autoplay=1')) {
                videoFrame.src = currentSrc.includes('?') 
                    ? `${currentSrc}&autoplay=1`
                    : `${currentSrc}?autoplay=1`;
            }
            
            // Show status
            showNotification(`Playing Level ${currentLevel} solution`);
        }
        
        // Update level display
        function updateLevelDisplay() {
            levelNumberEl.textContent = currentLevel;
            displayLevelEl.textContent = currentLevel;
            levelInputEl.value = currentLevel;
        }
        
        // Update navigation buttons
        function updateNavigationButtons() {
            if (currentLevel <= 1) {
                prevBtn.disabled = true;
                prevBtn.style.opacity = "0.6";
            } else {
                prevBtn.disabled = false;
                prevBtn.style.opacity = "1";
            }
            
            if (currentLevel >= 1858) {
                nextBtn.disabled = true;
                nextBtn.style.opacity = "0.6";
            } else {
                nextBtn.disabled = false;
                nextBtn.style.opacity = "1";
            }
        }
        
        // Show notification
        function showNotification(message, type = '') {
            notificationMessage.textContent = message;
            notification.className = 'notification show';
            
            if (type === 'success') {
                notification.style.background = '#2ecc71';
            } else if (type === 'error') {
                notification.style.background = '#e74c3c';
            } else {
                notification.style.background = '#3498db';
            }
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Setup event listeners
        function setupEventListeners() {
            // Play button
            playButton.addEventListener('click', playVideo);
            
            // Go to level button
            goToLevelBtn.addEventListener('click', () => {
                const level = parseInt(levelInputEl.value);
                if (level >= 1 && level <= 1858) {
                    navigateToLevel(level);
                } else {
                    showNotification('Please enter a level between 1 and 1858', 'error');
                }
            });
            
            // Input enter key
            levelInputEl.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') {
                    goToLevelBtn.click();
                }
            });
            
            // Navigation buttons
            prevBtn.addEventListener('click', () => {
                if (currentLevel > 1) {
                    navigateToLevel(currentLevel - 1);
                }
            });
            
            nextBtn.addEventListener('click', () => {
                if (currentLevel < 1858) {
                    navigateToLevel(currentLevel + 1);
                }
            });
            
            // Reset video when frame loads
            videoFrame.addEventListener('load', () => {
                videoLoading.style.display = 'none';
            });
        }
        
        // Navigate to level
        function navigateToLevel(level) {
            // Update URL without reloading the page
            window.history.pushState(null, null, `?id=${level}`);
            
            // Update current level
            currentLevel = level;
            
            // Update UI
            updateLevelDisplay();
            updateNavigationButtons();
            updateVideoContent();
            
            // Show notification
            showNotification(`Level ${level} loaded`, 'success');
        }
        
        // Handle back/forward navigation
        window.addEventListener('popstate', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const levelParam = urlParams.get('id');
            const level = parseInt(levelParam) || 1;
            
            if (level !== currentLevel) {
                currentLevel = level;
                updateLevelDisplay();
                updateNavigationButtons();
                updateVideoContent();
                showNotification(`Level ${level} loaded from history`, 'success');
            }
        });
        
        // Initialize on DOM load
        document.addEventListener('DOMContentLoaded', initPage);
    </script>
</body>
</html>
